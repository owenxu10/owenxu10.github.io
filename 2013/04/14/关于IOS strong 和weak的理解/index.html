<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>[IOS学习笔记]关于IOS strong 和weak的理解 - 崇山俊岭</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="崇山俊岭"><meta name="msapplication-TileImage" content="/img/myLogo.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="崇山俊岭"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="转：http:&amp;#x2F;&amp;#x2F;stackoverflow.com&amp;#x2F;questions&amp;#x2F;9262535&amp;#x2F;explanation-of-strong-and-weak-storage-in-ios5 The difference is that an object will be deallocated as soon as there are no strong pointers to it. Even if"><meta property="og:type" content="blog"><meta property="og:title" content="[IOS学习笔记]关于IOS strong 和weak的理解"><meta property="og:url" content="http://owenxu10.github.io/2013/04/14/%E5%85%B3%E4%BA%8EIOS%20strong%20%E5%92%8Cweak%E7%9A%84%E7%90%86%E8%A7%A3/"><meta property="og:site_name" content="崇山俊岭"><meta property="og:description" content="转：http:&amp;#x2F;&amp;#x2F;stackoverflow.com&amp;#x2F;questions&amp;#x2F;9262535&amp;#x2F;explanation-of-strong-and-weak-storage-in-ios5 The difference is that an object will be deallocated as soon as there are no strong pointers to it. Even if"><meta property="og:locale" content="en_US"><meta property="og:image" content="http://owenxu10.github.io/img/og_image.png"><meta property="article:published_time" content="2013-04-14T13:52:17.000Z"><meta property="article:modified_time" content="2022-05-20T18:40:51.239Z"><meta property="article:author" content="Owen Xu"><meta property="article:tag" content="IOS"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://owenxu10.github.io/2013/04/14/%E5%85%B3%E4%BA%8EIOS%20strong%20%E5%92%8Cweak%E7%9A%84%E7%90%86%E8%A7%A3/"},"headline":"[IOS学习笔记]关于IOS strong 和weak的理解","image":["http://owenxu10.github.io/img/og_image.png"],"datePublished":"2013-04-14T13:52:17.000Z","dateModified":"2022-05-20T18:40:51.239Z","author":{"@type":"Person","name":"Owen Xu"},"publisher":{"@type":"Organization","name":"崇山俊岭","logo":{"@type":"ImageObject","url":"http://owenxu10.github.io/img/myLogo.png"}},"description":"转：http:&#x2F;&#x2F;stackoverflow.com&#x2F;questions&#x2F;9262535&#x2F;explanation-of-strong-and-weak-storage-in-ios5 The difference is that an object will be deallocated as soon as there are no strong pointers to it. Even if"}</script><link rel="canonical" href="http://owenxu10.github.io/2013/04/14/%E5%85%B3%E4%BA%8EIOS%20strong%20%E5%92%8Cweak%E7%9A%84%E7%90%86%E8%A7%A3/"><link rel="icon" href="/img/myLogo.png"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=UA-132741676-1" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'UA-132741676-1');</script><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><meta name="generator" content="Hexo 6.2.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/myLogo.png" alt="崇山俊岭" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2013-04-14T13:52:17.000Z" title="4/14/2013, 6:52:17 AM">2013-04-14</time></span><span class="level-item"><a class="link-muted" href="/categories/About-Study/">About Study</a></span><span class="level-item">4 minutes read (About 549 words)</span></div></div><h1 class="title is-3 is-size-4-mobile">[IOS学习笔记]关于IOS strong 和weak的理解</h1><div class="content"><p>转：<a target="_blank" rel="noopener" href="http://stackoverflow.com/questions/9262535/explanation-of-strong-and-weak-storage-in-ios5">http://stackoverflow.com/questions/9262535/explanation-of-strong-and-weak-storage-in-ios5</a></p>
<p>The difference is that an object will be deallocated as soon as there are no <strong>strong</strong> pointers to it. Even if weak pointers point to it, once the last strong pointer is gone, the object will be deallocated, and all remaining weak pointers will be zeroed out.</p>
<span id="more"></span>

<p>Perhaps an example is in order.</p>
<p>Imagine our object is a dog, and that the dog wants to run away (be deallocated).</p>
<p>Strong pointers are like a leash on the dog. As long as you have the leash attached to the dog, the dog will not run away. If five people attach their leash to one dog, (five strong pointers to one object), then the dog will not run away until all five leashes are detached.</p>
<p>Weak pointers, on the other hand, are like little kids pointing at the dog and saying “Look! A dog!” As long as the dog is still on the leash, the little kids can still see the dog, and they’ll still point to it. As soon as all the leashes are detached, though, the dog runs away no matter how many little kids are pointing to it.</p>
<p>As soon as the last strong pointer (leash) no longer points to an object, the object will be deallocated, and all weak pointers will be zeroed out.</p>
<p>（weak和strong）不同的是 当一个对象不再有strong类型的指针指向它的时候 它会被释放  ，即使还有weak型指针指向它。一旦最后一个strong型指针离去 ，这个对象将被释放，所有剩余的weak型指针都将被清除。</p>
<p>可能有个例子形容是妥当的。</p>
<p>想象我们的对象是一条狗，狗想要跑掉（被释放）。</p>
<p>strong型指针就像是栓住的狗。只要你用牵绳挂住狗，狗就不会跑掉。如果有5个人牵着一条狗（5个strong型指针指向1个对象），除非5个牵绳都脱落 ，否着狗是不会跑掉的。</p>
<p>weak型指针就像是一个小孩指着狗喊到：“看！一只狗在那” 只要狗一直被栓着，小孩就能看到狗，（weak指针）会一直指向它。只要狗的牵绳脱落，狗就会跑掉，不管有多少小孩在看着它。</p>
<p>只要最后一个strong型指针不再指向对象，那么对象就会被释放，同时所有的weak型指针都将会被清除。</p>
<p>&amp;nbsp;</p>
</div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/IOS/">IOS</a></div><div class="sharethis-inline-share-buttons"></div><script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-62871f5cd1b4eb4d" defer></script></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2013/04/16/%E5%85%B3%E4%BA%8E@synthesize%20obj=_obj%E7%9A%84%E6%84%8F%E4%B9%89/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">[IOS学习笔记]关于@synthesize obj=_obj的意义</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2013/04/03/%E7%BE%8E%E5%88%A9%E5%9D%9A%E7%9A%84%E6%83%AC%E6%84%8F%E7%94%9F%E6%B4%BB/"><span class="level-item">美利坚的惬意生活</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><!--!--></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="https://www.gravatar.com/avatar/5eac82dba471630ab849e52a74d91ebf?s=128" alt="Owen Xu"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Owen Xu</p><p class="is-size-6 is-block">Chasing dream is damn working hard.</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Mountain View, CA</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">24</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">5</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">15</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/owenxu10" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Linkedin" href="https://www.linkedin.com/in/junshengxu/"><i class="fab fa-linkedin"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Instagram" href="https://www.instagram.com/xjs0229/"><i class="fab fa-instagram"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Weibo" href="https://weibo.com/u/1639072151"><i class="fab fa-weibo"></i></a></div></div></div><!--!--><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/About-Life/"><span class="level-start"><span class="level-item">About Life</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/About-Study/"><span class="level-start"><span class="level-item">About Study</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile" href="/categories/About-U-S-A/"><span class="level-start"><span class="level-item">About U.S.A</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/About-Work/"><span class="level-start"><span class="level-item">About Work</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Misc/"><span class="level-start"><span class="level-item">Misc</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li></ul></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2019-01-19T08:00:00.000Z">2019-01-19</time></p><p class="title"><a href="/2019/01/19/%E8%B0%B7%E6%AD%8C%E9%9D%A2%E8%AF%95%E6%80%BB%E7%BB%93/">谷歌面试总结</a></p><p class="categories"><a href="/categories/About-Study/">About Study</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2017-05-06T07:13:22.000Z">2017-05-06</time></p><p class="title"><a href="/2017/05/06/Leetcode-48/">Leetcode-48</a></p><p class="categories"><a href="/categories/About-Study/">About Study</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2017-04-27T18:38:01.000Z">2017-04-27</time></p><p class="title"><a href="/2017/04/27/%E7%94%B3%E8%AF%B7%E6%80%BB%E7%BB%93/">申请总结</a></p><p class="categories"><a href="/categories/About-Study/">About Study</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2017-01-29T09:13:45.000Z">2017-01-29</time></p><p class="title"><a href="/2017/01/29/2017/">2017 Happy the year of Rooster</a></p><p class="categories"><a href="/categories/About-Life/">About Life</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2016-04-19T20:13:06.000Z">2016-04-19</time></p><p class="title"><a href="/2016/04/19/Draymond/">Draymond man</a></p><p class="categories"><a href="/categories/About-Study/">About Study</a></p></div></article></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/Algorithm/"><span class="tag">Algorithm</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CMU/"><span class="tag">CMU</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/DREAM/"><span class="tag">DREAM</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Dream/"><span class="tag">Dream</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/GOOGLE/"><span class="tag">GOOGLE</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Hackintosh/"><span class="tag">Hackintosh</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/IOS/"><span class="tag">IOS</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Intro/"><span class="tag">Intro</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/JAVA/"><span class="tag">JAVA</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Kettering/"><span class="tag">Kettering</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/LeetCode/"><span class="tag">LeetCode</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Love/"><span class="tag">Love</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SAP/"><span class="tag">SAP</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Vacation/"><span class="tag">Vacation</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Wordpress/"><span class="tag">Wordpress</span><span class="tag">1</span></a></div></div></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/myLogo.png" alt="崇山俊岭" height="28"></a><p class="is-size-7"><span>&copy; 2022 Owen Xu</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>